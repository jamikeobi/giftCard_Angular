<div class="container mt-5 mb-5">
  <div class="row align-items-center">
    <!-- Left Column: Image Slider -->
    <div class="col-md-6">
      <div id="giftCardCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div
            class="carousel-item"
            *ngFor="let img of images; let i = index"
            [class.active]="i === 0"
          >
            <img
              [src]="img"
              class="d-block w-100 giftcard-img"
              alt="Gift Card"
            />
          </div>
        </div>
        <div class="carousel-indicators">
          <button
            *ngFor="let img of images; let i = index"
            type="button"
            [attr.data-bs-target]="'#giftCardCarousel'"
            [attr.data-bs-slide-to]="i"
            [class.active]="i === 0"
          ></button>
        </div>
      </div>
    </div>

    <!-- Right Column: Gift Card Form -->
    <div class="col-md-6">
      <div class="giftcard-form">
        <h3 class="text-center" style="font-weight: lighter">
          Buy a One4all Gift Card
        </h3>
        <form [formGroup]="giftCardForm" (ngSubmit)="onSubmit()">
          <!-- Amount & Quantity Row -->
          <div class="row g-3">
            <div class="col-6">
              <label class="form-label">Card Amount (€120 - €5000)</label>
              <input
                type="number"
                class="form-control"
                formControlName="amount"
                min="120"
                max="5000"
                required
              />
              <div
                *ngIf="
                  giftCardForm.get('amount')?.invalid &&
                  giftCardForm.get('amount')?.touched
                "
                class="text-danger"
              >
                Amount must be between €120 and €5000.
              </div>
            </div>
            <div class="col-6">
              <label class="form-label">Quantity</label>
              <input
                type="number"
                class="form-control"
                formControlName="quantity"
                min="1"
                required
              />
              <div
                *ngIf="
                  giftCardForm.get('quantity')?.invalid &&
                  giftCardForm.get('quantity')?.touched
                "
                class="text-danger"
              >
                Please enter a valid quantity.
              </div>
            </div>
          </div>

          <!-- Buttons -->
          <div class="d-flex gap-2 mt-3">
            <button
              type="submit"
              class="btn btn-primary w-50"
              [disabled]="giftCardForm.invalid"
            >
              Add to Cart
            </button>
            <button
              type="button"
              class="btn btn-outline-secondary w-50"
              data-bs-toggle="modal"
              data-bs-target="#messageModal"
            >
              Add Message
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- Modal for Adding Message -->
  <div class="container">
    <div
      class="modal fade"
      id="messageModal"
      tabindex="-1"
      aria-labelledby="messageModalLabel"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="messageModalLabel">Add a Message</h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
              aria-label="Close"
            ></button>
          </div>
          <div class="modal-body">
            <form [formGroup]="giftCardForm" (ngSubmit)="saveMessage()">
              <div class="mb-3">
                <label class="form-label">To</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="to"
                  required
                />
                <div
                  *ngIf="
                    giftCardForm.get('to')?.invalid &&
                    giftCardForm.get('to')?.touched
                  "
                  class="text-danger"
                >
                  Recipient name is required.
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">From</label>
                <input
                  type="text"
                  class="form-control"
                  formControlName="from"
                  required
                />
                <div
                  *ngIf="
                    giftCardForm.get('from')?.invalid &&
                    giftCardForm.get('from')?.touched
                  "
                  class="text-danger"
                >
                  Sender name is required.
                </div>
              </div>
              <div class="mb-3">
                <label class="form-label">Message</label>
                <textarea
                  class="form-control"
                  formControlName="message"
                  rows="3"
                  required
                ></textarea>
                <div
                  *ngIf="
                    giftCardForm.get('message')?.invalid &&
                    giftCardForm.get('message')?.touched
                  "
                  class="text-danger"
                >
                  Please enter a message.
                </div>
              </div>
              <!-- <button type="submit" class="btn btn-success w-100" [disabled]="giftCardForm.get('to')?.invalid || giftCardForm.get('from')?.invalid || giftCardForm.get('message')?.invalid">
                  Save Message
                </button> -->
            </form>
          </div>
        </div>
      </div>
    </div>
  </div>
  <!-- Hidden Close Button to Close Modal -->
  <div class="container">
    <button
      id="closeModalBtn"
      type="button"
      class="d-none"
      data-bs-dismiss="modal"
    ></button>
  </div>
</div>

<section class="container my-5">
  <h3 class="text-primary d-flex justify-content-center fw-bold">
    Please note: this gift card requires ID verification to activate and spend.
  </h3>
  <p class="mt-3" style="font-size: 11px; margin-left: 20px">
    "The One4all Gift card is issued by GVS Prepaid Limited. GVS Prepaid Limited
    is authorized by the Financial Conduct Authority under the Electronic Money
    Regulations 2011 (register reference 900230) for the issuing of electronic
    money."
  </p>

  <p>
    The One4all Chip & PIN Gift Card is designed for higher-value gift cards for
    occasions such as weddings, milestone birthdays, and employee rewards.
    Purchasing a One4all Chip & PIN Gift Card works the same as any other
    One4all Gift Card, online or in any of our physical retail outlets.
  </p>

  <p>
    Your recipient will be required to activate the card by following a short ID
    verification process using an iOS or Android smartphone.
  </p>

  <p class="fw-bold text-dark">
    Minimum load: £120 &nbsp; &mdash; &nbsp; Maximum load: £5000
  </p>
</section>

<!-- Filter Section -->
<section class="container my-4 filter">
  <div class="btn-group d-flex">
    <button
      class="btn btn-outline-primary flex-fill"
      [class.active]="activeTab === 'whyOne4All'"
      (click)="activeTab = 'whyOne4All'"
    >
      Why One4all
    </button>

    <button
      class="btn btn-outline-primary flex-fill"
      [class.active]="activeTab === 'productDescription'"
      (click)="activeTab = 'productDescription'"
    >
      Product Description
    </button>

    <button
      class="btn btn-outline-primary flex-fill"
      [class.active]="activeTab === 'deliveryOptions'"
      (click)="activeTab = 'deliveryOptions'"
    >
      Delivery Options
    </button>
  </div>

  <!-- Paragraphs -->
  <div class="content-box mt-4">
    <p *ngIf="activeTab === 'whyOne4All'">
      At One4all, we believe that the perfect gift is unique to each and every
      individual. That’s why, whether you’re into fashion, technology, books,
      beauty, games, or anything else, the One4all Gift Card has got you covered
      for every occasion.
    </p>
    <p *ngIf="activeTab === 'whyOne4All'">
      Accepted with over 170 High Street brands, including Argos, Marks &
      Spencer, Nando's, Primark, IKEA, and many, many more, the One4all Gift
      Card is the perfect gift for friends, family, and loved ones.
    </p>
    <p *ngIf="activeTab === 'whyOne4All'">
      The One4all Gift Card is issued by GVS Prepaid Limited. GVS Prepaid
      Limited is authorised by the Financial Conduct Authority under the
      Electronic Money Regulations 2011 (register reference 900230) for the
      issuing of electronic money.
    </p>

    <p *ngIf="activeTab === 'productDescription'">
      Give a One4all Gift Card for any occasion! This multi-store gift card
      offers its recipient the freedom of being able to choose something they
      really want and can enjoy. This classic black gift card is the most
      popular of our gift cards and is perfect of all occasions and milestones,
      whether its a birthday, wedding, anniversary or Christmas gift.
    </p>

    <p *ngIf="activeTab === 'productDescription'">
      Accepted in over 8,000 retail partners nationwide including Brown Thomas,
      Woodies DIY, Debenhams, Currys, M&S and online at selected online retail
      partners, this gift card really can be spent on everything. Choose from
      clothes, books, flowers, surfing, holidays, DIY, restaurants and much
      more. Leave the choice up to them, you know they’ll appreciate it.
    </p>

    <p *ngIf="activeTab === 'deliveryOptions'">
      All orders subject to credit card clearance. Orders received before 11am
      on a working day will be dispatched either same day or the next working
      day. Orders placed at a weekend or bank holiday will be processed the next
      working day.
    </p>
    <p *ngIf="activeTab === 'deliveryOptions'">
      Standard Delivery times are dependent on carriers, however, normally would
      be within 1 – 3 working days from dispatch.
    </p>
    <p *ngIf="activeTab === 'deliveryOptions'">
      Tracked Delivery times are dependent on carriers, however, normally would
      be within 1 -2 working days from dispatch.
    </p>
  </div>
</section>

<app-digital-options></app-digital-options>
